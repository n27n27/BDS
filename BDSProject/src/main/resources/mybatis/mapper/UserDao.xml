<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http:mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.study.dao.IUserDao">

	<insert id="registerDAO" parameterType="java.util.HashMap">
		insert into usrdb(usrnum, usrid, usrpw, usrname, usrpnum, usremail, usraddr) 
		 values (usrdb_seq.nextval, #{usrid}, #{usrpw}, #{usrname}, #{usrpnum}, #{usremail}, #{usraddr})
	</insert>
	
	<select id ="userinfo" resultType="com.example.study.dto.UserDto">
		<![CDATA[select * from usrdb where usrid = #{param1}]]>
	</select>
		
	<select id="userList" resultType="com.example.study.dto.UserDto">		
		<![CDATA[select * from (select rownum num, A.* from (select * from usrdb order by usrnum) A where rownum <= ${param2}) B where B.num >= ${param1}]]>
	</select>
	
	<select id="rpro1" resultType="_int">
		select count(*) from r_board where rname=#{usrid} and rprocessing=1 
	</select>
	<select id="rpro2" resultType="_int">
		select count(*) from r_board where rname=#{usrid} and rprocessing=2 
	</select>
	<select id="rpro3" resultType="_int">
		select count(*) from r_board where rname=#{usrid} and rprocessing=3 
	</select>
	<select id="rpro4" resultType="_int">
		select count(*) from r_board where rname=#{usrid} and rprocessing=4 
	</select>
	
	<update id="myinfoModify" parameterType="java.util.HashMap">
		<![CDATA[update usrdb set usrpw=#{usrpw}, usrpnum=#{usrpnum}, usremail=#{usremail}, usraddr=#{usraddr}
				  where usrid=#{usrid} ]]>
	</update>	
</mapper>